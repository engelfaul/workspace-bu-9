BROKER SCHEMA com.davivienda.busregional.servicios



--Declaración de NameSpaces
DECLARE soapenv					NAMESPACE 'http://schemas.xmlsoap.org/soap/envelope/';
DECLARE xsi						NAMESPACE 'http://www.w3.org/2001/XMLSchema-instance';
DECLARE nameSpaceFault			NAMESPACE 'http://schemas.xmlsoap.org/soap/envelope/';

--Prefijos de espacio de nombres
DECLARE esbXML 						NAMESPACE 'http://davivienda.com/envelope/esbxml';
DECLARE mrm							NAMESPACE 'http://www.davivienda.com/xml/ConsTotTCCafAgr';
DECLARE clnp                    	NAMESPACE 'http:://www.davivienda.com/xml/ConsultarListaExtractosPorNumeroProducto';
DECLARE cld                     	NAMESPACE 'http://www.davivienda.com/xml/ConsultarLiquidacionDivisa';
DECLARE dav 						NAMESPACE 'http://www.davivienda.cr';
DECLARE cam                     	NAMESPACE 'http://www.davivienda.com/xml/CambioUsuarioYClave';
DECLARE V1_Autenticacion			NAMESPACE 'http://www.davivienda.com/RSA/SrvScnAutenticacion/v1';
DECLARE V1_GestionClaveCanalVirtual NAMESPACE 'http://www.davivienda.com/RSA/SrvScnGestionClaveCanalVirtual/v1';
DECLARE v1							NAMESPACE 'http://www.davivienda.com/xml/SrvScnGestionClaveCanalVirtual/v1';
DECLARE v11							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ContextoSolicitudTipo/v1';
DECLARE v12							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ServicioTipo/v1';
DECLARE v13							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/OperacionCanalTipo/v1';
DECLARE v14							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ConsumidorTipo/v1';
DECLARE v15							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/AplicacionTipo/v1';
DECLARE v16							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/CanalTipo/v1';
DECLARE v17							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/TerminalTipo/v1';
DECLARE v18							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/HuellaDigitalDispositivoTipo/v1';
DECLARE v19							NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/CriterioOrdenamientoTipo/v1';
DECLARE v110						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/PaginacionTipo/v1';
DECLARE v111						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/PersonaTipo/v1';
DECLARE v112						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ContactoTipo/v1';
DECLARE v113						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/TelefonoTipo/v1';
DECLARE v114						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/UbicacionPersonaTipo/v1';
DECLARE v115						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/MunicipioTipo/v1';
DECLARE v116						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/DepartamentoTipo/v1';
DECLARE v117						NAMESPACE 'http://www.davivienda.com/Esquemas/Persona/PersonaNaturalTipo/v1';
DECLARE v118						NAMESPACE 'http://www.davivienda.com/Esquemas/Persona/ClienteNaturalTipo/v1';
DECLARE v119						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/SeguridadTokenTipo/v1';

DECLARE v11Res						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ContextoRespuestaTipo/v1';
DECLARE v12Res						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ResultadoTransaccionTipo/v1';
DECLARE v13Res						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/ErrorTipo/v1';
DECLARE v14Res						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/PaginacionTipo/v1';
DECLARE v15Res						NAMESPACE 'http://www.davivienda.com/Esquemas/Framework/SeguridadTokenTipo/v1';
DECLARE pspnsbckend					CHARACTER 'http://service.pasivas.davivienda.ws/';
DECLARE coreDav					    CHARACTER 'http://corpdva.com/Core/';
DECLARE cppanswas					CHARACTER 'http://www.davivienda.com/banking/common/schema/diccionarioConsultaPlanPagos/2016/01';
DECLARE cdprnswas					CHARACTER 'http://www.davivienda.com/banking/common/schema/diccionariodetallePrestamo/2016/01';
DECLARE nshbwas					 	CHARACTER 'http://www.davivienda.com/banking/common/schema/headerCanonico/2016/01';
DECLARE hdrns						NAMESPACE 'http://www.davivienda.com/banking/common/schema/headerCanonico/2016/01';
DECLARE avcvns						NAMESPACE 'http://www.davivienda.com/banking/common/schema/diccValidaAutenticacionBancaVirtual';
DECLARE reclns					    NAMESPACE 'http://www.davivienda.com/banking/common/schema/diccionarioRecuperaClave/2016/01';
DECLARE getestadoctanswas			CHARACTER 'http://tempuri.org/';
DECLARE cdlcns                      NAMESPACE 'http://www.davivienda.com/banking/common/schema/detalleLineaCredito';

DECLARE SUCCESS							EXTERNAL CONSTANT CHARACTER 'Success';
DECLARE UNO								EXTERNAL CONSTANT CHARACTER '1';
DECLARE ESPACIO							EXTERNAL CONSTANT CHARACTER ' ';
DECLARE UDPSigReg	 					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPContrasena 					EXTERNAL CONSTANT CHARACTER '';


--Declaración de constantes básicas
DECLARE VERSION_UNO_CERO				CONSTANT CHARACTER '1.0';
DECLARE VERSION_DOS_CERO				CONSTANT CHARACTER '2.0';
DECLARE PAIS							CONSTANT CHARACTER 'CR';
DECLARE CANAL							CONSTANT INTEGER '2';
DECLARE USUARIO							CONSTANT CHARACTER 'USUARIO';
DECLARE ZERO							CONSTANT CHARACTER '0';
DECLARE DASH							CONSTANT CHARACTER '-';

--Declaración de UDP's
DECLARE UDPCodErrorInesperado			EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPMsgErrorInesperado			EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPreplyToQ						EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPReqQ							EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPTarea						EXTERNAL CONSTANT CHARACTER ''; 
DECLARE FaultActorReq					EXTERNAL CONSTANT CHARACTER '';
DECLARE FaultActorResp					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPEndPointResp					EXTERNAL CONSTANT CHARACTER '';
DECLARE TABLE_SERVICES					SHARED ROW 					'';
DECLARE DefaultCode						EXTERNAL CONSTANT CHARACTER '';
DECLARE DefaultDescription				EXTERNAL CONSTANT CHARACTER '';	
DECLARE VACIO							CONSTANT CHARACTER '';
DECLARE NMessageSet 					EXTERNAL CHARACTER '';
DECLARE ZERO_INT						CONSTANT INTEGER 0;
DECLARE UDPSERVICEID					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPCodProd 			            EXTERNAL CONSTANT CHARACTER '';
DECLARE I_PAIS							EXTERNAL CONSTANT CHARACTER '';
DECLARE I_CANAL							EXTERNAL CONSTANT CHARACTER '';
DECLARE I_VERSIONSERVICIO				EXTERNAL CONSTANT CHARACTER '';
DECLARE I_USUARIO						EXTERNAL CONSTANT CHARACTER '';
DECLARE I_TIPOIDENTIFICACION			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_DEBUG             			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_CLAVENUE             			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_SIGUIENTE_REG        			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_TIPO_DESTINO        			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_TIPO_CUENTA        			EXTERNAL CONSTANT CHARACTER '';
DECLARE I_MODO_CONS						EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPUser							EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPPass							EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPOperacion					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPIdTransaccion				EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPVersionServicio				EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPIdSesion						EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPIdCanal						EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPCodPais						EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPCodIdioma					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDPNumeroGestion				EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_DT_FORMAT_IN  				EXTERNAL CHARACTER '';
DECLARE UDP_DT_FORMAT_OUT 				EXTERNAL CHARACTER '';


--Constante para identificador de homologación
DECLARE IdHomologCodBusinessError		EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_CONNECTION_ERROR_CODE		EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_CONNECTION_ERROR_DESC		EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_TIMEOUT_ERROR_CODE			EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_TIMEOUT_ERROR_DESC			EXTERNAL CONSTANT CHARACTER '';
DECLARE BUSREG_CR						CONSTANT CHARACTER 'BUSREG_CR';
DECLARE COD_ESTADO_PRODUCTO				CONSTANT CHARACTER 'CODBRCSCL';
DECLARE BR_CR_TP				        CONSTANT CHARACTER 'BR_CR_TP';
DECLARE BR_CR_TPI				        CONSTANT CHARACTER 'BR_CR_TPI';

--Códigos
DECLARE STATTECHCODE_RESERVED  EXTERNAL CONSTANT CHARACTER '3200';
DECLARE COD_CONNECTION_ERROR 			CONSTANT CHARACTER '2100';
DECLARE TIMEOUT_ERROR_CODE_ADP_INT 		CONSTANT CHARACTER '2103';
DECLARE COD_DATA_IN_ERROR				CONSTANT CHARACTER '6082';
DECLARE CONNECTION_ERROR_CODE_ADP_INT	CONSTANT CHARACTER '2100';
DECLARE COD_TIMEOUT_ERROR				CONSTANT CHARACTER '2103';
DECLARE CODIGOS_ERROR_VALIDACION		CONSTANT CHARACTER '5026,4162,5028,5004';
DECLARE VALIDATION_ERROR_CODE_RESERVED	CONSTANT CHARACTER '3201';
DECLARE ESB_COD_ERROR_DATA_BASE_HOMOLOG	CONSTANT CHARACTER '8893';
DECLARE COD_EXITOSO						CONSTANT CHARACTER '0000';
DECLARE COD_HOMOLOG_ERROR				CONSTANT CHARACTER '6083';
DECLARE DESC_HOMOLOG_ERROR				CONSTANT CHARACTER 'ERROR DE HOMOLOGACION';

--Descripciones en mensajes
DECLARE ACEPTSUCC 						 CONSTANT CHARACTER 'B';
DECLARE ACEPTA_MAL  					 CONSTANT CHARACTER 'M';
DECLARE OBLIGATORION					 CONSTANT CHARACTER 'N';
DECLARE OBLIGATORIOS					 CONSTANT CHARACTER 'S';
DECLARE DESC_CONNECTION_ERROR 			 CONSTANT CHARACTER 'Aplicacion No disponible';
DECLARE DESC_TIMEOUT_ERROR 				 CONSTANT CHARACTER 'La transaccion no respondio en el tiempo';
DECLARE DESC_TIMEOUT_ERROR_V2			 CONSTANT CHARACTER 'La transaccion no se respondio en tiempo';
DECLARE DESC_DATA_IN_ERROR				 CONSTANT CHARACTER 'ERROR EN LA VALIDACION DE LA ESTRUCTURA';
DECLARE VALOR_OBLIGATORIO_NOENCONTRADO   CONSTANT CHARACTER 'Valor obligatorio no encontrado en la tabla de homologación';
DECLARE VALOR_NOOBLIGATORIO_NOENCONTRADO CONSTANT CHARACTER 'Valor no obligatorio no encontrado en la tabla';
DECLARE ESB_DESC_ERROR_DATA_BASE_HOMOLOG CONSTANT CHARACTER 'Error de ejecución en base de datos de Homologación';
DECLARE TAG_NAME_DATAHEADER				 CONSTANT CHARACTER 'DataHeader';
DECLARE TAG_NAME_INTEGHEADER			 CONSTANT CHARACTER 'IntegrationHeader';
DECLARE REQUEST							 CONSTANT CHARACTER 'Request';
DECLARE REF_INFO						 CONSTANT CHARACTER 'referenceInfo';
DECLARE REGISTRO						 CONSTANT CHARACTER 'Registro';
DECLARE INTEG_HEADER_CURRENT_TIMESTAMP	 CONSTANT CHARACTER 'yyyy/MM/dd HH:mm:ss:SSS';
DECLARE INTEG_HEADER_CURRENT_TIMESTAMP2	 CONSTANT CHARACTER 'yyyy-MM-ddTHH:mm:ss.SSS-HH:mm';
DECLARE TEST							 CONSTANT CHARACTER 'TEST';
DECLARE API_VERSION						 CONSTANT CHARACTER '660';
DECLARE CLIENT_VERSION					 CONSTANT CHARACTER '1.0';					
DECLARE DESC_EXITOSO					 CONSTANT CHARACTER 'Exitosa';
DECLARE DESC_EXITOSO_OK					 CONSTANT CHARACTER 'OK';

--Declaracion de variables usadas en migracion Embargos
DECLARE SSERVER							CONSTANT CHARACTER 'S:Server';


--Declaración de constantes para valores default y patrones de fechas
DECLARE DATE_FORMAT						CONSTANT CHARACTER 'yyyyMMdd';
DECLARE DATE_FORMAT_HYPHENATED			CONSTANT CHARACTER 'yyyy-MM-dd';
DECLARE DEFAULT_TIME_ISO8601			CONSTANT CHARACTER 'T00:00:00-05:00';
DECLARE DEFAULT_DATE                    CONSTANT CHARACTER '19000101';
DECLARE RESTAPLICATION					CONSTANT CHARACTER 'application/json';
DECLARE FORMATO_TIEMPO_RESPONSE		    CONSTANT CHARACTER 'HH:mm:ss.SSS';

---  
DECLARE HOMOLOGATION_TABLE			    SHARED ROW  '';
DECLARE CONSTANTS_TABLE					SHARED ROW 	'';
DECLARE VISTA_HOMOLOG					SHARED ROW 	'';
DECLARE VISTA_HOMOLOG_TP				SHARED ROW 	'';
DECLARE VISTA_HOMOLOG_EP				SHARED ROW 	'';
DECLARE CACHE_TIPO_TRANSFERENCIA		SHARED ROW 	'';

--statusCodes para el HandleError
DECLARE BUSINESS_EXCEPTION				CONSTANT CHARACTER 'BusinessException';
DECLARE SYSTEM_EXCEPTION				CONSTANT CHARACTER 'SystemException';

--CODIGOS DE ERRORES
DECLARE SYSTEM_CODES_ERROR_VALIDACION	CONSTANT CHARACTER '4162,5026,5028';
DECLARE CODIGODEVALIDACION				CONSTANT CHARACTER 'ESB101';
DECLARE CODIGODEVALIDACIONREST			CONSTANT CHARACTER '400';
DECLARE DESCRIPCIONDEVALIDACION			CONSTANT CHARACTER 'ERROR EN ESTRUCTURA DE MENSAJE';
DECLARE DESCRIPCIONDEVALIDACIONREST		CONSTANT CHARACTER 'Bad Request';

--ERROR NEGOCIO
DECLARE CODIGOERRORNEGOCIOJSON			CONSTANT CHARACTER '400';
DECLARE DESCRIPCIONNEGOCIOJSON			CONSTANT CHARACTER 'Bad Request';

--ERROR GENERICO
DECLARE CODIGODEERRORBUS				CONSTANT CHARACTER 'ESB900';
DECLARE CODIGODEERRORBUSREST			CONSTANT CHARACTER '400';
DECLARE DESCRIPCIONDEERRORBUS		    CONSTANT CHARACTER 'EXCEPCION GENERICA DE SISTEMA';

--ERROR  DE HOMOLOGACION
DECLARE SYSTEM_CODES_ERROR_HOMOLOGACION	CONSTANT CHARACTER '10012';
DECLARE CODIGODEERRORHOMOLOGACION		CONSTANT CHARACTER 'ESB105';
DECLARE DESCRIPCIONDEERRORHOMOLOGACION	CONSTANT CHARACTER 'EXCEPCION EN HOMOLOGACION';

--ERROR  DE BACKEND
DECLARE SYSTEM_CODES_ERROR_BACKEND		CONSTANT CHARACTER '401,403,400,409,500';
DECLARE CODIGODEERRORBACKEND			CONSTANT CHARACTER 'ESB102';
DECLARE DESCRIPCIONDEERRORBACKEND		CONSTANT CHARACTER 'ERROR RETORNADO POR EL BACKEND';

--ERROR  DE TIMEOUT
DECLARE SYSTEM_CODES_ERROR_TIME			CONSTANT CHARACTER '2103';
DECLARE CODIGODEERRORTIMEOUT			CONSTANT CHARACTER 'ESB103';
DECLARE CODIGODEERRORTIMEOUTREST		CONSTANT CHARACTER '408';
DECLARE DESCRIPCIONDEERRORTIMEOUT		CONSTANT CHARACTER 'TIMEOUT EN SERVICIO DE BACKEND';

--ERROR  DE CONEXION
DECLARE SYSTEM_CODES_ERROR_CONEXION	    CONSTANT CHARACTER '2100,3200';
DECLARE CODIGODEERRORCONEXION			CONSTANT CHARACTER 'ESB104';
DECLARE CODIGODEERRORCONEXIONREST		CONSTANT CHARACTER '404';
DECLARE DESCRIPCIONDEERRORCONEXION		CONSTANT CHARACTER 'ERROR CONEXION CON BACKEND';

--Constantes Servicio ConsultaSaldosCliente
DECLARE ESTADO_PRODUCTO					EXTERNAL CONSTANT CHARACTER '';
DECLARE UDP_TipoId						EXTERNAL CONSTANT CHARACTER '';

--Constantes Bus Regional
DECLARE CANAL_CR						CONSTANT CHARACTER 'CR';
DECLARE CODTTRANS						CONSTANT CHARACTER 'CODTTRANS';

--Constantes Bus Regional Honduras
DECLARE CANAL_HN						CONSTANT CHARACTER 'HN';
DECLARE BUSREG_HN						CONSTANT CHARACTER 'BUSREG_HN';
DECLARE BR_HN_TP				        CONSTANT CHARACTER 'BR_HN_TP';
DECLARE BR_HN_TPI				        CONSTANT CHARACTER 'BR_HN_TPI';

--Constantes Bus Regional Panamá
DECLARE CANAL_PA						CONSTANT CHARACTER 'PA';
DECLARE BUSREG_PA						CONSTANT CHARACTER 'BUSREG_PA';
DECLARE BR_PA_TP				        CONSTANT CHARACTER 'BR_PA_TP';
DECLARE BR_PA_TPI				        CONSTANT CHARACTER 'BR_PA_TPI';
DECLARE I_TIPO_CLIENTE					EXTERNAL CONSTANT CHARACTER '';
DECLARE I_IP_CLIENTE					EXTERNAL CONSTANT CHARACTER '';
DECLARE I_ID_APP						EXTERNAL CONSTANT CHARACTER '';
DECLARE I_ID_SESION						EXTERNAL CONSTANT CHARACTER '';
DECLARE I_LENGUAJE						EXTERNAL CONSTANT CHARACTER '';
--Constantes NameSpaces 
DECLARE V1_SrvScnTokenREG			NAMESPACE 'http://www.davivienda.com/RSA/SrvScnTokenREG/v1';
DECLARE V1_SrvScnNotiPUSH			NAMESPACE 'http://www.davivienda.com/RSA/SrvScnNotificacionesPUSH/v1';
DECLARE V1_SrvScnToken				NAMESPACE 'http://www.davivienda.com/Empresarial/SrvScnToken/v1';
DECLARE v119N						NAMESPACE 'http://www.davivienda.com/rsa/notificacion/v1';
DECLARE v119P 						NAMESPACE 'http://www.davivienda.com/Esquemas/push/MensajeTipo/v1';
DECLARE v120 						NAMESPACE 'http://www.davivienda.com/rsa/otp/v1';
